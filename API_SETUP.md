# Настройка API

## Проблема: ERR_CONNECTION_REFUSED

Если вы видите ошибку `ERR_CONNECTION_REFUSED` в консоли браузера, это означает, что фронтенд не может подключиться к бэкенд API серверу.

## Решение

### 1. Проверьте, запущен ли бэкенд сервер

Убедитесь, что ваш Django/другой бэкенд сервер запущен и доступен.

### 2. Настройте URL API

Создайте файл `.env.local` в корне проекта (на том же уровне, что и `package.json`) и укажите URL вашего API сервера:

```env
NEXT_PUBLIC_API_URL=http://localhost:8000
```

**Важно:** 
- Если ваш API работает на другом порту, измените порт (например, `http://localhost:3001`)
- Если API работает на другом домене, укажите полный URL (например, `https://api.example.com`)
- Не добавляйте `/api` в конце URL, это уже включено в пути запросов

### 3. Перезапустите Next.js сервер

После создания или изменения `.env.local` файла, перезапустите Next.js сервер:

```bash
npm run dev
```

### 4. Проверьте переменную окружения

В консоли браузера (DevTools) вы должны увидеть предупреждение, если используется дефолтный URL. Это поможет диагностировать проблему.

## Примеры конфигурации

### Продакшн сервер (по умолчанию)
```env
NEXT_PUBLIC_API_URL=https://zahq.uz
```

### Локальная разработка (если нужен другой сервер)
```env
NEXT_PUBLIC_API_URL=http://localhost:8000
```

### Другой удаленный сервер
```env
NEXT_PUBLIC_API_URL=https://api.example.com
```

## Проверка подключения

Откройте консоль браузера (F12) и проверьте:
1. Нет ли ошибок `ERR_CONNECTION_REFUSED`
2. Запросы отправляются на правильный URL
3. Ответы от API приходят успешно

## Дополнительная информация

- Файл `.env.local` не должен быть закоммичен в Git (уже добавлен в `.gitignore`)
- Переменные окружения с префиксом `NEXT_PUBLIC_` доступны в браузере
- После изменения `.env.local` всегда перезапускайте Next.js сервер

